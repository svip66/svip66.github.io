moid=[];DivHeight=0;var zhankaitm;var x={postData:function(c,d,g,e,b,f){var a=x.loading(g);xhr=$.ajax({type:d?"POST":"GET",url:c+(c.indexOf("?")<0?"?":"&")+"r="+Math.random(1),async:true,dataType:"html",timeout:e||60000,data:d,success:function(h){a===""||x.close(a);if(b){b(h)}else{h?$("#ajaxshow").html(h):x.btn("请求失败","系统没有回应内容")}return false},error:function(h){a===""||x.close(a);if(f){f(h)}else{x.btn("操作失败，请稍后重试!")}return false}})},ajax:function(c,h,b,a,e,f){if(a){var e=nv(e,"操作确认");var g='<div><h4 class="mt0 mb5">'+e+"</h4></div><div>"+a+"</div>";layer.confirm(g,{btn:["确 定","取 消"],title:false},function(d){layer.mclose(d);if(f){f()}x.postData(c,h,b)})}else{x.postData(c,h,b)}},select:function(e,c,f,b,a){x.ajax(c,f+"&val="+e.value,b,a)},del:function(c,g,b,a,f){a=nv(a,"您确定要删除吗?");var e='<div><h4 class="mt0 mb5">删除确认</h4></div><div>'+a+"</div>";layer.confirm(e,{btn:["确 定","取 消"],title:false},function(d){layer.mclose(d);if(f){layer.prompt({title:"请输入‘确定删除’四个字",formType:0,btn:["删 除","取 消"]},function(j,h){layer.mclose(h);if(j==="确定删除"){x.postData(c,g,b)}else{x.msg("输入错误，取消删除")}})}else{x.postData(c,g,b)}})},msg:function(a,b){b=nv(b,1.5);layer.msg(a,{skin:"layui-layer-hui",time:b*1000})},loading:function(a,b){if(a===false){return""}a=nv(a,5);if(a===0){return""}layer.mclose("dialog");if(typeof a=="number"){if(a>7){return""}return layer.load(a,{offset:a>5?"t":"auto",area:a>5?"600px":"",shadeClose:b?true:false,shade:0.00001,anim:-1})}else{return layer.msg(a,{icon:16,shadeClose:b?true:false,shade:0.00001,time:0})}},url:function(b,a){x.loading(nv(a,6),true);window.location.href=b},pjax:function(b,a){x.loading(nv(a,6),true);$.pjax({url:b,container:"#pjax-container",scrollTo:false,timeout:20000,})},btn:function(d,c,a){var e;if(d&&c){e='<div><h4 class="mt0 mb5">'+d+"</h4></div><div>"+c+"</div>"}else{if(d){e='<div><h4 class="mt2 mb1">'+d+"</h4></div>"}else{e=c}}return layer.confirm(e,{btn:a||"我知道了",closeBtn:0,title:false,btnAlign:"c",yes:function(b){layer.mclose(b)}})},input:function(b,a){var c=$(".i-"+b).html();$(".i-"+b).html("");layer.open({type:1,closeBtn:2,title:false,maxWidth:1200,content:c,success:function(d){if(typeof a=="object"){$.each(a,function(f,e){$("input[name="+e+"]").val($(".h-"+e).html());if(f==0){$("input[name="+e+"]").focus()}})}else{if(a===1){$('input[name="'+b+'"]').val($(".h-"+b).html());$('input[name="'+b+'"]').focus()}}},ends:function(d){if(c){if(a!==2){d.find('input[type="radio"],input[type="checkbox"]').each(function(){$(this).prop("checked")?$(this).attr("checked","checked"):$(this).removeAttr("checked")});d.find("select").each(function(){$(this).find("option:selected").attr("selected","selected")});d.find('input[type="text"],input[type="number"]').each(function(){$(this).attr("value",$(this).val())});d.find('textarea[type="text"]').each(function(){$(this).html($(this).val())})}$(".i-"+b).html(d.find(".layui-layer-content").html())}}})},inputs:function(c,h,f,b,e,a){var g=a?'<div class="p3 pt0 f3 hui">'+a+"</div>":"";layer.open({type:1,title:nv(f,"请输入数据"),btn:["确 定","取 消"],area:"500px",closeBtn:1,content:e?'<div class="w p5"><textarea type="number" class="form form-lg w f10 p0 no" style="height:120px;" placeholder="······" onkeypress="return x.ints(this,11,1);">'+nv(b,"")+"</textarea>"+g+"</div>":'<div class="w p5"><textarea type="text" class="form form-lg w f10 p0 no" style="height:120px;"  placeholder="······">'+nv(b,"")+"</textarea>"+g+"</div>",yes:function(d){var j=x.val("textarea.form.form-lg.w.f10.p0.no","请输入数据");if(!j){return}x.close(d);x.ajax(c,h+"&val="+j)},no:function(d){x.close(d)}});$("textarea.form.form-lg.w.f10.p0.no").focus()},tip:function(b,a){var c="";if(typeof b=="string"&&(b.substring(0,1)=="#"||b.substring(0,1)==".")){c=$(b).html();$(b).html("")}layer.open({type:1,closeBtn:nv(a,0),title:false,content:c?c:b,end:function(){if(c){$(b).html(c)}}})},tips:function(f,c,d,a,e){layer.tips(c,f,{tips:[nv(d,1),nv(a,"#6daacd")],time:nv(e,5000)})},close:function(a){typeof xhr!="undefined"&&xhr.abort();x.mclose(a)},mclose:function(b){if(b==="All"){layer.closeAll()}else{if(b){layer.close(b)}else{var a=$(".layui-layer-page").length;if(a>0){$(".layui-layer-page").each(function(c){if(c>=a-1){layer.close($(this).attr("times"))}})}}}},form:function(b,c,a){c=nv(c,"formid");x.ajax(b,$("#"+c).serialize(),a)},html:function(c,h,b,a,d,f){h=nv(h,"user");d=nv(d,30000);var g=$(h!="app-mian"?"#"+h+"_content":h);if(g.hasClass("dtheight")){DivHeight=g.find("div").outerHeight(true);if(DivHeight>0){g.height(DivHeight).addClass("o-h")}}if(b===false){b=999}if(b===0){g.html('<div class="w h19 load tc pt7"><p class="h11 pt3"><span class="mode-loading"></span></p><p class="f5 hui">正在加载</p></div>')}if(c.indexOf("renew=1")>=0){setTimeout(function(){x.runhtml(c,h,b,a,d,f)},1000)}else{if(c.indexOf("renew=")>=0){x.runhtml(c,h,b,a,d,f)}else{if(c.indexOf("frame=")<0){c=c+(c.indexOf("?")<0?"?":"&")+"frame="+(startcheck(c)?"app":"html")}if(f){$("#"+h+"_load").html("<script>function "+h+"_load(i,n){x.html('"+c+"&renew='+nv(i,1), '"+h+"', nv(n,"+b+"),'"+nv(a)+"', '"+d+"', '"+nv(f)+"');}<\/script>")}x.runhtml(c,h,b,a,d,f)}}},runhtml:function(c,j,b,a,d,f){var h=$(window).height();var g=$(j!="app-mian"?"#"+j+"_content":j);x.postData(c,"",b,d,function(m){var p="",l="信息",e="";if(/<script>/.test(m)){var k=/<script>([\s\S]*?)<\/script>/g;var o=m.match(k);if($.isArray(o)){$.each(o,function(s,r){p+=r});m=trim(m.replace(k,""))}}if(/<title>/.test(m)){var n=/<title>([\s\S]*?)<\/title>/g;var q=m.match(n);if($.isArray(q)){l=q[0].slice(7,-8);m=m.replace(n,"")}}if(j=="app-mian"&&m.indexOf("app-mian")>0){m=m.match(/<app-mian([\s\S]*?)<\/app-mian>/g);m=m[0].slice(10,-11)}if(f){if(!isnull(a)&&!m){m='<div class="w h19 load tc pt7"><p class="h11 pt1"><i class="icon icon-info f12 hui sl"></i></p><p class="f5 hui">空页面，没有内容可以显示的</p></div>'}g.html(m);g.prev().html(l);p!=""&&$("#"+j+"_show").html(p);g.css("max-height",$(window).height()-(h<800?130:220))}else{if(m){(!isnull(a))?g.append(m):g.html(m)}else{if(b==2){g.html('<div class="w h19 load tc pt7"><p class="h11 pt1"><i class="icon icon-info f12 hui sl"></i></p><p class="f5 hui">没有更多内容可以显示了</p></div>')}}p!=""&&$("#ajaxload").html(p)}if(g.hasClass("dtheight")){g.height(g.find("div").outerHeight(true));setTimeout(function(){g.height("auto").removeClass("o-h")},305)}return false},function(e){if(f){g.prev().html("提示信息");g.html('<div class="w h19 load tc pt7"><p class="h11 pt1"><i class="icon icon-info f12 hui sl"></i></p><p class="f5 hui">系统太忙了，请刷新重试</p><p><button class="btn btn-sm w15 btn-hui btn-1 rx1 bold mt6" onclick="'+j+'_load();">刷 新</button></p></div>');g.css("max-height",$(window).height()-(h<800?130:220))}else{if(c.indexOf("renew=")<0){c=c+(c.indexOf("?")<0?"?":"&")+"renew=1"}g.html('<div class="w h19 load tc pt7"><p class="h11 pt1"><i class="icon icon-info f12 hui sl"></i></p><p class="f5 hui">系统太忙了，请刷新重试</p><p><button class="btn btn-sm w15 btn-hui btn-1 rx1 bold mt6" onclick="x.html(\''+c+"','"+j+"',0,'','"+nv(d)+"','"+nv(f)+"');\">刷 新</button></p></div>")}if(g.hasClass("dtheight")){g.height(g.find("div").outerHeight(true));setTimeout(function(){g.height("auto").removeClass("o-h")},305)}})},mode:function(j,a,k,g,f,l){k=nv(k,30000);a=nv(a,"layer");var h=true;var e=$(window).height();if($("#mode_"+a+"_content").length>0){var b=Object.keys(moid);console.log(b);if(b[b.length-1]==a){h=false}else{layer.mclose(moid[a]);$("#mode_"+a+"_content").remove()}}if(h===true){moid[a]=layer.open({type:1,id:"mode_"+a,offset:e<800?nv(f,"47px"):nv(f,"97px"),closeBtn:1,title:"正在加载",area:nv(l,700)+"px",content:"",end:function(){delete (moid[a]);if(g){g()}},ends:function(){}});j=j+(j.indexOf("?")<0?"?":"&")+"frame=mode&modeid="+a}x.html(j,"mode_"+a,0,0,k,1)},modes:function(a,e,b,c){x.mode(a,e,"","",c,b)},scroll:function(b,c,a){$(b).animate({scrollTop:(nv(c,0))},nv(a,100))},ints:function(b,e,a){e=nv(e,11);var d=$(b).val();var c=event.which;if(a){if(c==46){if(d.length<1||d.indexOf(".")>0){return false}else{return true}}}if(c>=48&&c<=57){if(d.length<e){return true}}return false},val:function(b,a){if(typeof b=="object"){b='input[name="'+b[0]+'"]'}if($(b).length==0){return""}if(a===null){$(b).val("");return}else{if(!$(b).val()){if(a===1){$(b).focus()}else{if(a){$(b).focus();x.msg(a)}}return""}return $(b).val()}},h_v:function(b,a){if($(b).length>0&&$(a).length>0){$(a).val($(b).html());$(a).focus()}else{if($(a).length>0){$(a).val("");$(a).focus()}}return},inum:function(b,a,e){var c=$(b).html();if(e){c=Number(c)-Number(a)}else{c=Number(c)+Number(a)}$(b).html(Math.round(c*100)/100);return c},code:function(c){c=nv(c,32);var d="abcdefghijklmnopqrstuvwxyz";var b=d.length;var a="";for(i=0;i<c;i++){a+=d.charAt(Math.floor(Math.random()*b))}return a},notice:function(b){if($(b).length>0){var a=$(b+" > p").width();$(b+" > p").css("width",a+"px");if(a>($(b).width())){$(b+" > p").addClass("textleft").css("animation-duration",Math.ceil(a/60)+"s")}}},getcookie:function(b){var a,c=new RegExp("(^| )"+b+"=([^;]*)(;|$)");if(a=document.cookie.match(c)){return unescape(a[2])}else{return null}},};function _code(c){c=nv(c,32);var d="abcdefghijklmnopqrstuvwxyz";var b=d.length;var a="";for(i=0;i<c;i++){a+=d.charAt(Math.floor(Math.random()*b))}return a}var sm={img:function(b,c,a,d){$("#qrimg").attr("cp",d);$("#qrimg").attr("qrsig",b);$("#qrimg").attr("loginsig",c);$("#qrimg").html("<img src='data:image/png;base64,"+a+"'/>")},qrlogin:function(a,f){var e=$("#qrimg").attr("cp");var b=$("#qrimg").attr("qrsig");var c=$("#qrimg").attr("loginsig");if(b){x.ajax(a,f+"&qrsig="+decodeURIComponent(b)+"&loginsig="+decodeURIComponent(c)+"&cp="+e)}},};var page={btn:function(e,b,a){b=nv(b,"index");var f=parseInt(page.get(b));var d=parseInt($("."+b+"_selpages").html());var c=1;if(e=="first"){if(f<=1){x.msg("已经是第一页了");return false}}else{if(e=="up"){if(f<=1){x.msg("已经是第一页了");return false}if(f>1){c=f-1}}else{if(e=="down"){if(f>=d){x.msg("已经是最后一页了");return false}if(f<d){c=f+1}}else{if(f>=d){x.msg("已经是最后一页了");return false}c=d}}}page.set(b,c);typeof a==="function"?a(b):false},initialization:function(a){a=nv(a,"index");var b=parseInt($("."+a+"_selcount").html());var c=parseInt($("."+a+"_selpagenum option:selected").text());if(!b){$("."+a+"_selpages").html(1)}else{if(c){$("."+a+"_selpages").html(Math.ceil(b/c))}else{$("."+a+"_selpages").html(Math.ceil(b/12))}}},setnum:function(c,a,b){b=nv(b,"index");$("."+b+"_selpage").html(1);x.ajax("/ajax/index/setpagenum","act="+a+"&val="+c.value+"&mod="+b,0);page.initialization(b)},callback:function(b,a){b=nv(b,"index");page.set(b,1);typeof a==="function"?a(b):false},setcount:function(a,b){b=nv(b,"index");$("."+b+"_selpage").html(1);$("."+b+"_selcount").html(a);page.initialization(b)},set:function(b,a){b=nv(b,"index");$("."+b+"_selpage").html(a)},get:function(a){a=nv(a,"index");return $("."+a+"_selpage").html()},};function trim(a){return a.replace(/(^\s*)|(\s*$)/g,"")}function isnull(a){if(a===null||a===""||a==="undefined"||a===undefined||a===false||a==="false"||a==="null"){return true}return false}function nv(b,a){return(isnull(b))?(!isnull(a)?a:""):b}$(document).pjax("a[data-pjax]","#pjax-container",{type:"get",scrollTo:false,timeout:20000,});$(document).on("pjax:send",function(){x.close();pjaxloadID=x.loading(6)});$(document).on("pjax:complete",function(){layer.close(pjaxloadID)});$(document).on("click",".dropdown > .dropdown-menu a",function(){var a=$(this);if(!a.hasClass("no")){a.closest(".dropdown").find("button > span:first-child").text(a.text())}});$(document).on("keyup",function(a){var b=a.which;if(b==13){if($("a.layui-layer-btn0").length>0){$("a.layui-layer-btn0").click()}else{if($(".autoenter").length>0){$(".autoenter").click()}}}else{if(b==27){if($(".layui-layer").length>0){x.close(parseInt($(".layui-layer:last").attr("times")))}}}});$(document).ready(function(a){if(window.history&&window.history.pushState){$(window).on("popstate",function(){layer.closeAll()})}});$(document).on("click",".tabpanel .tablist a",function(d){var c=$(this);if(!c.hasClass("active")){var b=c.closest(".tabpanel");b.find(".tablist > a").removeClass("active").eq(c.index()).addClass("active");var a=b.find(".tabcontent > ."+c.attr("tabid"));b.find(".tabcontent > div").removeClass("active").eq(a.index()).addClass("active")}});$(document).on("click",".box_list > div",function(b){var a=$(this);a.parent().find("input").val(a.attr("box-type"));a.parent().find("div").removeClass("active").eq(a.index()).addClass("active")});$(document).on("click",".select .select-main",function(a){selectclose($(this).closest(".select"))}).on("click",".select .cursor,.select .in,.select .ins",function(){var b=$(this);if(!b.hasClass("no")){var a=b.closest(".select");if(typeof(b.attr("active"))=="undefined"){a.find("carem").html($(this).html());a.find("input.input").val($(this).attr("sel_type"));if(b.closest("ul").hasClass("active")){b.closest("ul").find("li").removeAttr("active").eq(b.index()).attr("active","")}}if(b.hasClass("cursor")||b.hasClass("ins")){selectclose(a)}}}).on("click",".select .select-desc",function(){selectclose($(this).closest(".select"))});function selectclose(a){if(a.hasClass("is-open")){a.find(".select-desc").addClass("fadeOut");a.find(".select-data").addClass("fadeOutUp");if(a.hasClass("fixed")){a.removeClass("fixed").css({"top":"","width":"","z-index":""});a.find(".select-desc").css("background-color","")}if(a.closest(".layui-layer").hasClass("layui-layer-page")){$("body").css("overflow","")}setTimeout(function(){a.find(".select-data").removeClass("fadeOutUp");a.removeClass("is-open").find(".select-desc").removeClass("fadeOut")},350)}else{if(a.closest(".layui-layer").hasClass("layui-layer-page")){selectfixed(a)}a.addClass("is-open");if(a.find(".site").length>0){selectposition(a)}}}function selectactive(c){var b,a;$(".select").each(function(){b=$(this);a=b.find("ul.active > li[active]");if(a.length>0){b.find("carem").html(a.html());b.find("input.input").val(a.attr("sel_type"))}else{b.find("carem").html(nv(c,"请点此选择"))}})}function selectposition(f){var e,c,g,d,b,a;var e=f.find(".site");e.each(function(h,j){if($(j).find("li[active]").length>0){c=$(j).height()/2;g=$(j).find("li[active]").height()*2;a=$(j).scrollTop();d=$(j).find("li[active]").position().top-c-g+a;if(d>0){$(j).scrollTop(d)}}})}function selectfixed(a){var j=a.offset().top;var g=a.offset().left;var l=a.outerWidth();var e=a.outerHeight();var m=$(window).width();var f=$(window).height();var b=$(window).scrollTop();var d=$(window).scrollLeft();var k=a.find(".select-data");var c=k.outerHeight();if((c+j+e-b)>f){j=j-b-((c+j+e-b)-f);b=0;a.find(".select-desc").css("background-color","hsla(0,0%,0%,0.8)");a.addClass("fixed").css({"top":j,"width":l,"z-index":29891017})}if(typeof(a.attr("l"))!="undefined"){k.css({"position":"fixed","top":j-b+e,"left":g-d})}else{if(typeof(a.attr("r"))!="undefined"){k.css({"position":"fixed","top":j-b+e,"right":m-g-l+d})}else{k.css({"position":"fixed","top":j-b+e,"left":g-d})}}if(typeof(a.attr("w"))=="undefined"){k.css("width",l)}$("body").css("overflow","hidden")}$(document).on("click",".zhankai",function(d){var a=$(this).attr("zk-name");var f=$(this).attr("zk-auto");var c=$("."+a).height()+1;var b=$("."+a)[0].scrollHeight+1;if(c<b){$("."+a).height(b);$(this).find(".s1").hide();$(this).find(".s2").show();if(f=="h1"){zhankaitm=setTimeout(function(){$("."+a).height("auto").removeClass("o-h")},210)}else{if(f=="h2"){zhankaitm=setTimeout(function(){$("."+a).height("auto").removeClass("o-h")},410)}else{if(f=="h3"){zhankaitm=setTimeout(function(){$("."+a).height("auto").removeClass("o-h")},610)}else{if(f=="h4"){zhankaitm=setTimeout(function(){$("."+a).height("auto").removeClass("o-h")},810)}else{if(f=="h5"){zhankaitm=setTimeout(function(){$("."+a).height("auto").removeClass("o-h")},1010)}else{zhankaitm=setTimeout(function(){$("."+a).removeClass("o-h")},300)}}}}}}else{clearTimeout(zhankaitm);if(f){$("."+a).addClass("o-h").height(b)}$("."+a).addClass("o-h").height(0);$(this).find(".s1").show();$(this).find(".s2").hide()}});function editorelem(c,d){var b=$("#"+d+"text > textarea");var a=new c("#"+d);a.customConfig.menus=["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","image","justify","quote","undo","redo"];a.customConfig.onchangeTimeout=50;a.customConfig.onchange=function(e){b.val(e)};a.create();a.txt.html(b.val());$("#"+d+"type").on("click",function(f){if($(this).attr("type")=="1"){$(this).attr("type","0").html("使用富文本编辑器");b.val(a.txt.html())}else{$(this).attr("type","1").html("使用普通编辑器");a.txt.html(b.val())}$("#"+d).toggle();$("#"+d+"text").toggle()})}$(document).keydown(function(a){if(a.target.nodeName=="BUTTON"||a.target.nodeName=="A"){switch(a.keyCode){case 13:return false;case 32:return false}}});layer.config({anim:0,shade:[0.4,"0,0%,0%"],resize:false,closeBtn:0,});function frame_width_control(c){var b=$(document.documentElement);function a(){var d=window.innerWidth;(d>nv(c,1300))?b.addClass("o-x-h").width(d):b.removeClass("o-x-h").width(nv(c,1300))}$(window).resize(function(){a()});a()}function addEventListener_pageshow(){window.addEventListener("pageshow",function(a){if(sessionStorage.getItem("refresh")==="true"){sessionStorage.removeItem("refresh");location.reload()}})}$(document).on("click",".click-nav a",function(c){var b=$(this).parent();var a=$(this).closest(".click-nav");if(b.hasClass("active")&&$(this).hasClass("auto")){b.toggleClass("active")}else{if(!b.hasClass("active")&&!b.hasClass("noclick")){if(b.parent().hasClass("nav-sub")||!$(this).hasClass("auto")){a.find("li > .nav-sub > li").removeClass("active")}if(b.parent().hasClass("nav-sub")){a=b.parent()}a.find(">li").removeClass("active").eq(b.index()).addClass("active")}}});function startcheck(a,d){var c=a.replace(/\//g,"");if(c.indexOf("?")>0){c=c.match(/(\S*)\?/)[1]}var b=$(".click-nav .nav"+c);if(d){return(b.length>0)?true:false}if(b.length>0){if(!b.hasClass("active")&&!b.hasClass("noclick")){b.parent().find("li").removeClass("active").eq(b.index()).addClass("active")}return true}return false}